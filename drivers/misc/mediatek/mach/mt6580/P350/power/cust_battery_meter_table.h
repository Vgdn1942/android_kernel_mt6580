#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		  27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-30,127476},
    	{-25,96862},
        {-20,74354},
        {-15,57626},
        {-10,45068},
        { -5,35548},
        {  0,28267},
        {  5,22650},
        { 10,18280},
        { 15,14855},
        { 20,12151},
        { 25,10000},
        { 30,8279},
        { 35,6892},
        { 40,5768},
        { 45,4852},
        { 50,4101},
        { 55,3483},
        { 60,2970},
        { 65,2544},
        { 70,2188},
        { 75,1889},
        { 80,1637}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
{0  ,4166 },
{2  ,4149 },
{4  ,4122 },
{6  ,4094 },
{8  ,4059 },
{9  ,4020 },
{11 ,3991 },
{13 ,3974 },
{15 ,3963 },
{17 ,3953 },
{19 ,3943 },
{21 ,3932 },
{23 ,3922 },
{24 ,3909 },
{26 ,3898 },
{28 ,3886 },
{30 ,3874 },
{32 ,3863 },
{34 ,3851 },
{36 ,3841 },
{38 ,3829 },
{40 ,3821 },
{41 ,3812 },
{43 ,3806 },
{45 ,3801 },
{47 ,3796 },
{49 ,3793 },
{51 ,3790 },
{53 ,3788 },
{55 ,3787 },
{56 ,3786 },
{58 ,3785 },
{60 ,3784 },
{62 ,3782 },
{64 ,3780 },
{66 ,3777 },
{68 ,3774 },
{70 ,3771 },
{72 ,3766 },
{73 ,3761 },
{75 ,3752 },
{77 ,3741 },
{79 ,3731 },
{81 ,3716 },
{83 ,3701 },
{85 ,3680 },
{87 ,3657 },
{88 ,3629 },
{90 ,3602 },
{92 ,3609 },
{94 ,3562 },
{96 ,3527 },
{98 ,3483 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 },
{100,3409 }
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{  
{0,   4161 },
{2,   4112 },
{4,   4087 },
{6,   4071 },
{8,   4046 },
{9,   4021 },
{11,  4001 },
{13,  3984 },
{15,  3974 },
{17,  3966 },
{19,  3955 },
{21,  3944 },
{23,  3933 },
{24,  3922 },
{26,  3911 },
{28,  3900 },
{30,  3890 },
{32,  3878 },
{34,  3866 },
{36,  3855 },
{38,  3842 },
{39,  3830 },
{41,  3819 },
{43,  3809 },
{45,  3801 },
{47,  3795 },
{49,  3791 },
{51,  3786 },
{53,  3784 },
{55,  3783 },
{56,  3782 },
{58,  3781 },
{60,  3781 },
{62,  3780 },
{64,  3780 },
{66,  3779 },
{68,  3777 },
{70,  3775 },
{71,  3774 },
{73,  3771 },
{75,  3765 },
{77,  3759 },
{79,  3747 },
{81,  3731 },
{83,  3710 },
{85,  3687 },
{86,  3658 },
{88,  3624 },
{90,  3590 },
{92,  3563 },
{94,  3539 },
{96,  3518 },
{98,  3486 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 },
{100, 3415 }
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
{0  , 4178 },
{2  , 4157 },
{3  , 4136 },
{5  , 4120 },
{7  , 4103 },
{8  , 4086 },
{10 , 4072 },
{11 , 4058 },
{13 , 4042 },
{15 , 4024 },
{16 , 4009 },
{18 , 3996 },
{20 , 3984 },
{21 , 3972 },
{23 , 3961 },
{25 , 3951 },
{26 , 3938 },
{28 , 3928 },
{29 , 3918 },
{31 , 3908 },
{33 , 3899 },
{34 , 3889 },
{36 , 3881 },
{38 , 3872 },
{39 , 3863 },
{41 , 3853 },
{43 , 3842 },
{44 , 3833 },
{46 , 3820 },
{47 , 3809 },
{49 , 3800 },
{51 , 3793 },
{52 , 3788 },
{54 , 3781 },
{56 , 3777 },
{57 , 3775 },
{59 , 3774 },
{61 , 3772 },
{62 , 3771 },
{64 , 3771 },
{65 , 3770 },
{67 , 3769 },
{69 , 3769 },
{70 , 3768 },
{72 , 3766 },
{74 , 3766 },
{75 , 3765 },
{77 , 3760 },
{79 , 3756 },
{80 , 3746 },
{82 , 3735 },
{83 , 3719 },
{85 , 3700 },
{87 , 3679 },
{88 , 3657 },
{90 , 3626 },
{92 , 3592 },
{93 , 3565 },
{95 , 3544 },
{97 , 3525 },
{98 , 3493 },
{100, 3414 },
{101, 3287 },
{103, 3057 },
{103, 3057 }
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
{0  , 4199  },    
{2  , 4177  },    
{3  , 4158  },    
{5  , 4139  },    
{6  , 4123  },    
{8  , 4107  },    
{10 , 4092  },    
{11 , 4075  },    
{13 , 4062  },    
{14 , 4046  },    
{16 , 4033  },    
{18 , 4019  },    
{19 , 4005  },    
{21 , 3992  },    
{22 , 3982  },    
{24 , 3969  },    
{26 , 3957  },    
{27 , 3947  },    
{29 , 3937  },    
{30 , 3927  },    
{32 , 3918  },    
{34 , 3908  },    
{35 , 3899  },    
{37 , 3890  },    
{38 , 3882  },    
{40 , 3873  },    
{42 , 3865  },    
{43 , 3856  },    
{45 , 3847  },    
{47 , 3835  },    
{48 , 3821  },    
{50 , 3812  },    
{51 , 3805  },    
{53 , 3800  },    
{55 , 3795  },    
{56 , 3790  },    
{58 , 3787  },    
{59 , 3785  },    
{61 , 3783  },    
{63 , 3782  },    
{64 , 3780  },    
{66 , 3780  },    
{67 , 3780  },    
{69 , 3779  },    
{71 , 3779  },    
{72 , 3775  },    
{74 , 3768  },    
{75 , 3761  },    
{77 , 3757  },    
{79 , 3752  },    
{80 , 3743  },    
{82 , 3733  },    
{83 , 3721  },    
{85 , 3703  },    
{87 , 3684  },    
{88 , 3662  },    
{90 , 3632  },    
{91 , 3601  },    
{93 , 3578  },    
{95 , 3559  },    
{96 , 3540  },    
{98 , 3511  },    
{99 , 3437  },    
{101, 3323  },    
{101, 3323  }
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0} 
 

};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
{363 ,4166 },
{362 ,4149 },
{370 ,4122 },
{382 ,4094 },
{409 ,4059 },
{486 ,4020 },
{578 ,3991 },
{618 ,3974 },
{644 ,3963 },
{658 ,3953 },
{667 ,3943 },
{673 ,3932 },
{686 ,3922 },
{683 ,3909 },
{689 ,3898 },
{685 ,3886 },
{684 ,3874 },
{686 ,3863 },
{680 ,3851 },
{684 ,3841 },
{673 ,3829 },
{675 ,3821 },
{676 ,3812 },
{678 ,3806 },
{684 ,3801 },
{688 ,3796 },
{695 ,3793 },
{699 ,3790 },
{700 ,3788 },
{707 ,3787 },
{717 ,3786 },
{725 ,3785 },
{730 ,3784 },
{736 ,3782 },
{740 ,3780 },
{749 ,3777 },
{755 ,3774 },
{765 ,3771 },
{774 ,3766 },
{786 ,3761 },
{792 ,3752 },
{795 ,3741 },
{813 ,3731 },
{819 ,3716 },
{836 ,3701 },
{846 ,3680 },
{856 ,3657 },
{867 ,3629 },
{881 ,3602 },
{1007,3609 },
{918 ,3562 },
{1004,3527 },
{1144,3483 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 },
{1504,3409 } 
 
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
{233,   4161 },
{269,   4112 },
{328,   4087 },
{346,   4071 },
{348,   4046 },
{354,   4021 },
{362,  4001 }, 
{370,  3984 }, 
{381,  3974 }, 
{388,  3966 }, 
{389,  3955 }, 
{396,  3944 }, 
{396,  3933 }, 
{406,  3922 }, 
{406,  3911 }, 
{409,  3900 }, 
{412,  3890 }, 
{409,  3878 }, 
{403,  3866 }, 
{402,  3855 }, 
{391,  3842 }, 
{381,  3830 }, 
{378,  3819 }, 
{373,  3809 }, 
{367,  3801 }, 
{371,  3795 }, 
{373,  3791 }, 
{376,  3786 }, 
{379,  3784 }, 
{387,  3783 }, 
{388,  3782 }, 
{395,  3781 }, 
{397,  3781 }, 
{402,  3780 }, 
{408,  3780 }, 
{415,  3779 }, 
{416,  3777 }, 
{418,  3775 }, 
{426,  3774 }, 
{432,  3771 }, 
{438,  3765 }, 
{443,  3759 }, 
{447,  3747 }, 
{456,  3731 }, 
{463,  3710 }, 
{472,  3687 }, 
{467,  3658 }, 
{455,  3624 }, 
{453,  3590 }, 
{464,  3563 }, 
{495,  3539 }, 
{551,  3518 }, 
{650,  3486 }, 
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 },  
{914, 3415 }   
   
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
{150, 4178 },
{151, 4157 },
{154, 4136 },
{157, 4120 },
{157, 4103 },
{163, 4086 },
{165, 4072 },
{165, 4058 },
{165, 4042 },
{168, 4024 },
{174, 4009 },
{174, 3996 },
{179, 3984 },
{178, 3972 },
{185, 3961 },
{188, 3951 },
{185, 3938 },
{195, 3928 },
{200, 3918 },
{200, 3908 },
{205, 3899 },
{206, 3889 },
{208, 3881 },
{216, 3872 },
{218, 3863 },
{212, 3853 },
{206, 3842 },
{200, 3833 },
{185, 3820 },
{174, 3809 },
{166, 3800 },
{164, 3793 },
{164, 3788 },
{157, 3781 },
{155, 3777 },
{158, 3775 },
{160, 3774 },
{159, 3772 },
{161, 3771 },
{161, 3771 },
{164, 3770 },
{170, 3769 },
{171, 3769 },
{174, 3768 },
{174, 3766 },
{181, 3766 },
{186, 3765 },
{181, 3760 },
{183, 3756 },
{174, 3746 },
{178, 3735 },
{182, 3719 },
{186, 3700 },
{194, 3679 },
{203, 3657 },
{200, 3626 },
{190, 3592 },
{193, 3565 },
{204, 3544 },
{221, 3525 },
{231, 3493 },
{225, 3414 },
{259, 3287 },
{444, 3057 },
{444, 3057 } 
     
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
{123, 4199  }, 
{126, 4177  }, 
{126, 4158  }, 
{125, 4139  }, 
{129, 4123  }, 
{129, 4107  }, 
{134, 4092  }, 
{130, 4075  }, 
{136, 4062  }, 
{134, 4046  }, 
{139, 4033  }, 
{140, 4019  }, 
{137, 4005  }, 
{138, 3992  }, 
{143, 3982  }, 
{138, 3969  }, 
{141, 3957  }, 
{144, 3947  }, 
{147, 3937  }, 
{147, 3927  }, 
{153, 3918  }, 
{154, 3908  }, 
{154, 3899  }, 
{160, 3890  }, 
{166, 3882  }, 
{170, 3873  }, 
{169, 3865  }, 
{171, 3856  }, 
{171, 3847  }, 
{160, 3835  }, 
{147, 3821  }, 
{139, 3812  }, 
{137, 3805  }, 
{139, 3800  }, 
{135, 3795  }, 
{132, 3790  }, 
{137, 3787  }, 
{136, 3785  }, 
{137, 3783  }, 
{136, 3782  }, 
{140, 3780  }, 
{144, 3780  }, 
{144, 3780  }, 
{147, 3779  }, 
{153, 3779  }, 
{151, 3775  }, 
{141, 3768  }, 
{140, 3761  }, 
{143, 3757  }, 
{143, 3752  }, 
{143, 3743  }, 
{141, 3733  }, 
{147, 3721  }, 
{144, 3703  }, 
{151, 3684  }, 
{153, 3662  }, 
{154, 3632  }, 
{151, 3601  }, 
{154, 3578  }, 
{160, 3559  }, 
{171, 3540  }, 
{168, 3511  }, 
{171, 3437  }, 
{187, 3323  }, 
{187, 3323  }  
      
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
 {0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0},
{0 ,0} 

};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

